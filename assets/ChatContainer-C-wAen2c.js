const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MarkdownComp-MmIJ2lYb.js","assets/index-BbWPBz1m.js","assets/index-C86VnIiV.css","assets/MarkdownComp-B5eUVdjS.css"])))=>i.map(i=>d[i]);
import{j as e,n as I,r as n,m as Q,_ as U,u as J,a as K,A as X,b as Y}from"./index-BbWPBz1m.js";import{u as Z}from"./useSidebar-B9C9h6tk.js";import{u as ee}from"./useQuery-Dw0jn-7D.js";const u="/sales/assets/botLogo-BJwa39RH.svg";function R({color:t,size:l}){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",children:e.jsx("path",{fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"m7 7l10 10M7 17L17 7"})})}function se(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5rem",height:"1.5rem",viewBox:"0 0 16 16",children:e.jsxs("g",{fill:"black",children:[e.jsx("path",{d:"m8 9.076l.085-.107a.751.751 0 1 0-1.171-.937L5.438 9.877L5.03 9.47a.747.747 0 0 0-1.06 0a.75.75 0 0 0 0 1.06l.407.408l.593.592a.75.75 0 0 0 1.116-.061l.522-.654h.001z"}),e.jsx("path",{fillRule:"evenodd",d:"M12 11a3 3 0 0 0 3-3V4a3 3 0 0 0-3-3H8a3 3 0 0 0-3 3v1H4a3 3 0 0 0-3 3v4a3 3 0 0 0 3 3h4a3 3 0 0 0 3-3v-1zM4 6.5A1.5 1.5 0 0 0 2.5 8v4A1.5 1.5 0 0 0 4 13.5h4A1.5 1.5 0 0 0 9.5 12V8A1.5 1.5 0 0 0 8 6.5zM13.5 4A1.5 1.5 0 0 0 12 2.5H8A1.5 1.5 0 0 0 6.5 4v1H8a3 3 0 0 1 3 3v1.5h1A1.5 1.5 0 0 0 13.5 8z",clipRule:"evenodd"})]})})}function te(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"none",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 9V6.2c0-1.12 0-1.68.218-2.108c.192-.377.497-.682.874-.874C10.52 3 11.08 3 12.2 3h5.6c1.12 0 1.68 0 2.108.218a2 2 0 0 1 .874.874C21 4.52 21 5.08 21 6.2v5.6c0 1.12 0 1.68-.218 2.108a2.002 2.002 0 0 1-.874.874C19.48 15 18.92 15 17.803 15H15M9 9H6.2c-1.12 0-1.68 0-2.108.218a1.999 1.999 0 0 0-.874.874C3 10.52 3 11.08 3 12.2v5.6c0 1.12 0 1.68.218 2.108a2 2 0 0 0 .874.874c.427.218.987.218 2.105.218h5.607c1.117 0 1.676 0 2.104-.218a2 2 0 0 0 .874-.874c.218-.428.218-.987.218-2.105V15M9 9h2.8c1.12 0 1.68 0 2.108.218a2 2 0 0 1 .874.874c.218.427.218.987.218 2.105V15"})})}function le(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"black",d:"M20 3H6.693A2.01 2.01 0 0 0 4.82 4.298l-2.757 7.351A1 1 0 0 0 2 12v2c0 1.103.897 2 2 2h5.612L8.49 19.367a2.004 2.004 0 0 0 .274 1.802c.376.52.982.831 1.624.831H12c.297 0 .578-.132.769-.36l4.7-5.64H20c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2m-8.469 17h-1.145l1.562-4.684A1 1 0 0 0 11 14H4v-1.819L6.693 5H16v9.638zM18 14V5h2l.001 9z"})})}function ne(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"#c74242",d:"M20 3h-1v13h1a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2M4 16h7l-1.122 3.368A2 2 0 0 0 11.775 22H12l5-5.438V3H6l-3.937 8.649l-.063.293V14a2 2 0 0 0 2 2"})})}function ie(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"black",d:"M20 8h-5.612l1.123-3.367c.202-.608.1-1.282-.275-1.802S14.253 2 13.612 2H12c-.297 0-.578.132-.769.36L6.531 8H4c-1.103 0-2 .897-2 2v9c0 1.103.897 2 2 2h13.307a2.01 2.01 0 0 0 1.873-1.298l2.757-7.351A1 1 0 0 0 22 12v-2c0-1.103-.897-2-2-2M4 10h2v9H4zm16 1.819L17.307 19H8V9.362L12.468 4h1.146l-1.562 4.683A.998.998 0 0 0 13 10h7z"})})}function re(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"#42c758",d:"M4 21h1V8H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2M20 8h-7l1.122-3.368A2 2 0 0 0 12.225 2H12L7 7.438V21h11l3.912-8.596L22 12v-2a2 2 0 0 0-2-2"})})}function V(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"3rem",height:"1rem",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:0,cy:12,r:3,fill:"black",children:e.jsx("animate",{id:"svgSpinners3DotsBounce0",attributeName:"cy",begin:"0;svgSpinners3DotsBounce1.end+0.25s",calcMode:"spline",dur:"0.6s",keySplines:".33,.66,.66,1;.33,0,.66,.33",values:"12;6;12"})}),e.jsx("circle",{cx:15,cy:12,r:3,fill:"black",children:e.jsx("animate",{attributeName:"cy",begin:"svgSpinners3DotsBounce0.begin+0.1s",calcMode:"spline",dur:"0.6s",keySplines:".33,.66,.66,1;.33,0,.66,.33",values:"12;6;12"})}),e.jsx("circle",{cx:30,cy:12,r:3,fill:"black",children:e.jsx("animate",{id:"svgSpinners3DotsBounce1",attributeName:"cy",begin:"svgSpinners3DotsBounce0.begin+0.2s",calcMode:"spline",dur:"0.6s",keySplines:".33,.66,.66,1;.33,0,.66,.33",values:"12;6;12"})})]})}function oe(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"none",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 16H5v5m9-13h5V3M4.583 9.003a8 8 0 0 1 14.331-1.027m.504 7.021a8 8 0 0 1-14.332 1.027"})})}function ae(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"white",d:"M12 2a5 5 0 1 1-5 5l.005-.217A5 5 0 0 1 12 2m2 12a5 5 0 0 1 5 5v1a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-1a5 5 0 0 1 5-5z"})})}const ce=({handleCloseModal:t,setModalFeedbackMsg:l,modalFeedbackMsg:a,handleNegativeModalForm:i,feedbackAdditional:c,setFeedbackAdditional:r})=>e.jsx("div",{className:"fixed z-50 top-0 right-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center",children:e.jsxs("div",{className:"bg-white border rounded-lg p-4 w-[550px] relative",children:[e.jsx("button",{className:"absolute right-2 top-2",onClick:t,children:e.jsx(R,{color:"#000000",size:"1.5rem"})}),e.jsx("p",{className:"text-xl font-semibold border-b pb-2",children:"Provide additional feedback:"}),e.jsx("div",{className:"my-6 flex flex-wrap gap-2",children:I.map(o=>e.jsx("button",{onClick:()=>l(o),className:`border px-2 py-1 rounded-md ${a===o&&"bg-primaryBG border-primary"}`,children:e.jsx("p",{children:o})},o))}),e.jsxs("form",{onSubmit:i,className:"flex flex-col my-4 gap-4",children:[e.jsx("input",{type:"text",value:c,onChange:o=>r(o.target.value),className:"border px-2 py-1 rounded",placeholder:"(optional) Feel free to add specific details"}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:`float-right bg-gray-400 w-24 h-8 text-white rounded-lg hover:bg-gray-500 ${a.length&&"bg-green-500 hover:bg-green-600"}`,children:"Submit"})})]})]})}),de=({chat:t,handlePositiveFeedback:l,handleNegativeFeedback:a,handleReLoad:i})=>{const[c,r]=n.useState(null),o=async d=>{r(d);const x=Q(d);h(x),setTimeout(()=>r(null),1e3)},h=async d=>{await navigator.clipboard.writeText(d)};return e.jsxs("div",{className:"flex gap-3 mt-2",children:[e.jsx("button",{onClick:()=>l(t),title:"Like",children:(t==null?void 0:t.feedback)==="positive"?e.jsx(re,{}):e.jsx(ie,{})}),e.jsx("button",{onClick:()=>a(t),title:"Dislike",children:(t==null?void 0:t.feedback)==="negative"?e.jsx(ne,{}):e.jsx(le,{})}),e.jsx("button",{onClick:()=>o(t.answer),title:"Copy",children:c===t.answer?e.jsx(se,{}):e.jsx(te,{})}),e.jsx("button",{onClick:()=>i(t),title:"Regenerate",children:e.jsx(oe,{})})]})},xe=({handleCloseNegativeFeedbackOption:t,setFeedbackMsg:l,feedbackMsg:a,handleNegativeResponse:i,handleOpenModal:c})=>e.jsxs("div",{className:"border relative rounded-lg px-4 py-2 w-96 ml-8 bg-white",children:[e.jsx("button",{className:"absolute right-2 top-2",onClick:t,children:e.jsx(R,{color:"#000000",size:"1.5rem"})}),e.jsx("p",{children:"Tell us more:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[I.map(r=>e.jsx("button",{onClick:()=>l(r),className:`border px-2 py-1 rounded-md ${a===r&&"bg-primaryBG border-primary"}`,children:e.jsx("p",{children:r})},r)),e.jsx("button",{onClick:c,className:"border px-2 py-1 rounded-md",children:e.jsx("p",{children:"More..."})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:` w-24 h-8 text-white rounded-lg disabled:bg-gray-400 disabled:hover:bg-gray-500 ${a.length&&"bg-green-500 hover:bg-green-600"}`,onClick:i,disabled:!a,children:"Send"})})]}),L=n.lazy(()=>U(()=>import("./MarkdownComp-MmIJ2lYb.js"),__vite__mapDeps([0,1,2,3]))),pe=({loading:t,message:l,getResponse:a})=>{const i=n.useRef(null),{session:c}=J(),{hideSidebar:r}=Z(),{chats:o,updateChat:h,setRerenderFor:d,rerenderFor:x}=K(),{clearQuery:T}=ee(),[H,z]=n.useState(!0),[j,b]=n.useState(!1),[D,f]=n.useState(!1),[k,p]=n.useState(""),[B,y]=n.useState(""),[N,g]=n.useState(""),[v,C]=n.useState(null),M=n.useCallback(()=>{if(!i.current)return;const{scrollTop:s,scrollHeight:w,clientHeight:m,offsetTop:S}=i.current,q=w-s<=m+S;z(q)},[]);n.useEffect(()=>{const s=i.current;H&&s&&s.scrollTo({top:s.scrollHeight,behavior:"auto"})},[t,l,H,o,j]),n.useEffect(()=>{const s=i.current;return s&&s.addEventListener("scroll",M),()=>{s&&s.removeEventListener("scroll",M)}},[M]);const E=s=>{C(s),b(!0)},P=()=>{C(null),b(!1),p(""),g("")},O=s=>{F(s,"positive")},A=()=>{v&&F(v,"negative"),b(!1),C(null),f(!1)},$=s=>{s.preventDefault(),!(k===""&&N==="")&&A()},F=async(s,w)=>{try{const m=`${X}/store/`,S={input_prompt:s.message,output:s.answer,ques_id:s.id,input_prompt_timestamp:s.inputTimestamp,output_timestamp:s.outputTimestamp,session:c,feedback:w,select_feedback_response:j?B:k,additional_comments:N};await Y.post(m,S),h({...s,feedback:w}),_()}catch(m){console.log(m)}},G=()=>{f(!0),y(""),p(""),g("")},_=()=>{f(!1),y(""),p(""),g("")},W=s=>{d(s.id),h({...s,answer:"",outputTimestamp:""}),a(s),T()};return e.jsx(n.Suspense,{fallback:e.jsx("div",{children:"Page is Loading..."}),children:e.jsxs("div",{onClick:r,ref:i,className:"flex-1 lg:w-[800px] lg:mx-auto overflow-y-auto px-2 min-h-[400px] relative",children:[o.map(s=>e.jsxs("div",{children:[s.message!==""&&e.jsxs("div",{className:"flex gap-2 items-start justify-end my-1",children:[e.jsx("div",{className:"max-w-[85%] bg-borderGrey px-4 py-2 rounded-xl whitespace-pre-line",children:e.jsx("p",{children:s.message})}),e.jsx("div",{children:e.jsx("div",{className:"bg-primary rounded-full w-8 h-8 flex justify-center items-center mt-1",children:e.jsx(ae,{})})})]}),s.answer!==""&&e.jsxs("div",{className:"flex gap-2 items-start my-1",children:[e.jsx("img",{src:u,alt:"bot logo",className:"mt-1 rounded-full w-8 h-8"}),e.jsxs("div",{className:"max-w-[85%] px-2 py-2 overflow-y-auto",children:[e.jsx(L,{markdownContent:s.answer}),e.jsx(de,{chat:s,handlePositiveFeedback:O,handleNegativeFeedback:E,handleReLoad:W})]})]}),j&&v!==null&&s.id===v.id&&e.jsx(xe,{handleCloseNegativeFeedbackOption:P,setFeedbackMsg:p,feedbackMsg:k,handleNegativeResponse:A,handleOpenModal:G}),x===s.id&&t&&e.jsxs("div",{className:"flex gap-2 items-start my-1",children:[e.jsx("img",{src:u,alt:"bot logo",className:"mt-1 rounded-full w-8 h-8"}),e.jsx("div",{className:"px-1 pb-1 mt-auto",children:e.jsx(V,{})})]}),x===s.id&&l&&e.jsxs("div",{className:"flex gap-2 items-start my-1",children:[e.jsx("img",{src:u,alt:"bot logo",className:"mt-1 rounded-full w-8 h-8"}),e.jsx("div",{className:"max-w-[85%] px-2 py-2 overflow-y-auto",children:e.jsx(L,{markdownContent:l})})]})]},s.id)),x===""&&t&&e.jsxs("div",{className:"flex gap-2 items-start my-1",children:[e.jsx("img",{src:u,alt:"bot logo",className:"mt-1 rounded-full w-8 h-8"}),e.jsx("div",{className:"px-1 pb-1 mt-auto",children:e.jsx(V,{})})]}),x===""&&l&&e.jsxs("div",{className:"flex gap-2 items-start my-1",children:[e.jsx("img",{src:u,alt:"bot logo",className:"mt-1 rounded-full w-8 h-8"}),e.jsx("div",{className:"max-w-[85%] px-2 py-2 overflow-y-auto",children:e.jsx(L,{markdownContent:l})})]}),D&&e.jsx(ce,{handleCloseModal:_,setModalFeedbackMsg:y,modalFeedbackMsg:B,handleNegativeModalForm:$,feedbackAdditional:N,setFeedbackAdditional:g})]})})};export{pe as default};
